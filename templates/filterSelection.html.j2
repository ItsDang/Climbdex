<!DOCTYPE html>
<html>

<head>
  {% include 'head.html.j2'%}
  <style>
    .input-group-text {
      width: 125px;
    }
  </style>
</head>

<body>
  <div class="container-sm text-center">
    {% include 'heading.html.j2' %}
    <div class="row justify-content-md-center">
      <div class="col-md-5">
        <form class="card p-3 bg-light" id="form-search" action="/results">
          <div class="input-group mb-3">
            <span class="input-group-text">Angle</span>
            <select class="form-select" id="select-angle" name="angle">
              <option value="any" selected>Any</option>
              {% for angle in angles %}
              <option value="{{angle[0]}}">{{angle[0]}}</option>
              {% endfor %}
            </select>
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text">Min Ascents</span>
            <input type="number" class="form-control" id="input-min-ascents" value="5" min="0" name="minAscents" />
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text">Min Rating</span>
            <input type="number" , class="form-control" id="input-min-rating" value="1.0" min="1.0" max="3.0" step="0.1"
              name="minRating" />
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text">Min Grade</span>
            <select class="form-select" id="select-min-grade" name="minGrade">
              {% for grade in grades %}
              <option value="{{grade[0]}}" {% if grade==grades[0] %}selected{% endif %}>{{grade[1]}}</option>
              {% endfor %}
            </select>
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text">Max Grade</span>
            <select class="form-select" id="select-max-grade" name="maxGrade">
              {% for grade in grades %}
              <option value="{{grade[0]}}" {% if grade==grades[-1] %}selected{% endif %}>{{grade[1]}}</option>
              {% endfor %}
            </select>
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text">Sort By</span>
            <select class="form-select" id="select-sort-by" name="sortBy">
              <option value="ascents" selected>Ascents</option>
              <option value="difficulty">Difficulty</option>
              <option value="name">Name</option>
              <option value="quality">Quality</option>
            </select>
            <select class="form-select" id="select-sort-order" name="sortOrder">
              <option value="desc" selected>Descending</option>
              <option value="asc">Ascending</option>
            </select>
          </div>
          <div class="input-group mb-3 d-grid gap-2">
            <button class="btn btn-secondary" id="hold-filter-button" data-bs-toggle="collapse"
              data-bs-target="#div-hold-filter" type="button">
              Holds
            </button>
            <input type="hidden" id="input-hold-filter" name="holds" />
            {% for param_name, param_value in params.items(multi=True)%}
            <input type="hidden" name="{{param_name}}" value="{{param_value}}" />
            {% endfor %}
            <div class="collapse" id="div-hold-filter">
              <svg id="svg-hold-filter" viewbox="0 0 0 0" xmlns="http://www.w3.org/2000/svg"></svg>
            </div>
          </div>
          <div class="input-group mb-3 d-grid gap-2">
            <button class="btn btn-primary" type="submit">Search</button>
          </div>
        </form>
      </div>
    </div>
    <div class="row justify-content-md-center mt-3">
      {% include 'footer.html.j2' %}
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
  <script src="{{url_for('static', filename='js/common.js')}}"></script>
  <script src="{{url_for('static', filename='js/filterSelection.js')}}"></script>
  <script>
    const onClick = function (event) {
      onFilterCircleClick(event.target, {{ colors | tojson}})
    };
    drawBoard('svg-hold-filter', {{ images_to_holds | tojson}}, {{ edge_left }}, {{ edge_right }}, {{ edge_bottom }}, {{ edge_top }}, onClick);
  </script>
</body>

</html>